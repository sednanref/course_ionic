if (self.CavalryLogger) { CavalryLogger.start_js(["x8BYT"]); }

__d('MessengerAttachmentImageBlock.react',['cx','React','joinClasses'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'MessengerAttachmentImageBlock',propTypes:{attachment:i.object.isRequired},render:function(){return (c('React').createElement('div',{className:c('joinClasses')(this.props.className,this._computeClass())},this._renderImage(),c('React').createElement('div',{className:"_5swm"},this.props.children)));},_renderImage:function(){if(!this.props.attachment.media||!this.props.attachment.media.image)return null;var l=this._getDimensions(),m=l.height,n=l.width,o=m>n,p=k(m,n),q=m&&n?m/n*100:100,r=o||p?.2:1,s=o||p?q:52,t={backgroundImage:'url('+this.props.attachment.media.image+')',minHeight:'0px',paddingBottom:o&&q>150?'136px':s*r+'%'};if(this.props.attachment.description&&this.props.attachment.source)t.minHeight='112px';return (c('React').createElement('div',{className:"_3xn1",style:t}));},_computeClass:function(){if(!this.props.attachment.media||!this.props.attachment.media.image)return "_3xn3 _5swn";var l=this._getDimensions(),m=l.height,n=l.width,o=m>n,p=k(m,n);return "_3xn3"+(p&&!o?' '+"_3xn5":'')+(o?' '+"_3xn6":'')+(n>=m&&!p?' '+"_3xn7":'');},_getDimensions:function(){var l=this.props.attachment.properties||this.props.attachment.media.image_size||{},m=l.height,n=l.width;if(m&&n){m=parseInt(m,10);n=parseInt(n,10);return {height:m,width:n};}return {height:0,width:0};}});function k(l,m){return l<=300&&m<=300;}f.exports=j;},null);
__d('MercuryShareImage.react',['cx','ChatImageArrowDirection','ChatImageWithArrow.react','React'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'MercuryShareImage',propTypes:{height:i.number.isRequired,round:i.bool,source:i.string.isRequired,width:i.number.isRequired},render:function(){return (c('React').createElement('div',{className:"_4hsl"},c('React').createElement(c('ChatImageWithArrow.react'),{arrowDirection:c('ChatImageArrowDirection').BOTH,height:this.props.height,round:!!this.props.round,source:this.props.source,width:this.props.width})));}});f.exports=j;},null);
__d('MercuryFallbackShareAttachmentTextBlock.react',['cx','LineClamp.react','MercuryShareAttachmentRenderLocations','MercuryShareAttachmentReactShape','React'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'MercuryFallbackShareAttachmentTextBlock',propTypes:{attachment:c('MercuryShareAttachmentReactShape'),location:i.oneOf(c('MercuryShareAttachmentRenderLocations').getValues())},render:function(){if(!this.props||!this.props.attachment)return c('React').createElement('div',{className:"__6j"});var k,l,m;if(c('MercuryShareAttachmentRenderLocations').MESSENGER===this.props.location){if(this.props.attachment.description)l=c('React').createElement('div',{className:"__6l"},c('React').createElement(c('LineClamp.react'),{customEllipsis:" ",lines:2,lineHeight:16},this.props.attachment.description));if(this.props.attachment.title)k=c('React').createElement('div',{className:"__6k"},c('React').createElement(c('LineClamp.react'),{customEllipsis:" ",lines:2,lineHeight:18},this.props.attachment.title));if(this.props.attachment.source)m=c('React').createElement('div',{className:"__6m"},this.props.attachment.source);return (c('React').createElement('div',{className:"__6j"},k,l,m));}if(this.props.attachment.title)k=c('React').createElement('div',{className:"__6k"},this.props.attachment.title);if(this.props.attachment.description)l=c('React').createElement('div',{className:"__6l"},this.props.attachment.description);if(this.props.attachment.source)m=c('React').createElement('div',{className:"__6m"},this.props.attachment.source);return (c('React').createElement('div',{className:"__6j"},k,l,m));}});f.exports=j;},null);
__d('MercuryFallbackShareAttachmentContent.react',['cx','Image.react','ImageBlock.react','MercuryFallbackShareAttachmentTextBlock.react','MercuryShareAttachmentRenderLocations','MercuryShareAttachmentReactShape','MercuryShareImage.react','MessengerAttachmentImageBlock.react','React','URI','joinClasses'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=72,k=c('React').createClass({displayName:'MercuryFallbackShareAttachmentContent',propTypes:{attachment:c('MercuryShareAttachmentReactShape'),location:i.oneOf(c('MercuryShareAttachmentRenderLocations').getValues())},render:function(){var l=this.props.attachment,m=this.props.location,n=(c('MercuryShareAttachmentRenderLocations').CHAT===m?"_49or":'')+(c('MercuryShareAttachmentRenderLocations').WEB_INBOX===m?' '+"__nm":'')+(c('MercuryShareAttachmentRenderLocations').CHAT_PREVIEW===m?' '+"_324d":'')+(c('MercuryShareAttachmentRenderLocations').CHAT!==m?' '+"_tih":'')+(!(l&&l.media.image)?' '+"_49ou":'')+(' '+"_310t");if(l.media&&l.media.image){if(c('MercuryShareAttachmentRenderLocations').CHAT===m||c('MercuryShareAttachmentRenderLocations').CHAT_PREVIEW===m){return (c('React').createElement(c('ImageBlock.react'),{className:n,spacing:'medium'},c('React').createElement(c('MercuryShareImage.react'),{height:j,source:l.media.image,width:j}),c('React').createElement('div',{style:{display:'flex',justifyContent:'center',flexDirection:'column',height:j}},c('React').createElement(c('MercuryFallbackShareAttachmentTextBlock.react'),this.props))));}else if(c('MercuryShareAttachmentRenderLocations').MESSENGER===m)return (c('React').createElement(c('MessengerAttachmentImageBlock.react'),{className:n,attachment:l},c('React').createElement(c('MercuryFallbackShareAttachmentTextBlock.react'),this.props),this.props.children));return (c('React').createElement(c('ImageBlock.react'),{className:c('joinClasses')(this.props.className,n)},c('React').createElement(c('Image.react'),{className:"__6n",src:l.media.image,width:j}),c('React').createElement(c('MercuryFallbackShareAttachmentTextBlock.react'),this.props),this.props.children));}return (c('React').createElement('div',{className:c('joinClasses')(this.props.className,n)},c('React').createElement(c('MercuryFallbackShareAttachmentTextBlock.react'),this.props),this.props.children));}});f.exports=k;},null);
__d('MercuryFallbackShareAttachment.react',['cx','Link.react','MercuryFallbackShareAttachmentContent.react','MercuryShareAttachmentRenderLocations','MercuryShareAttachmentReactShape','MessengerAdsWebTypedLogger','MNAdsLoggerEventEnum','React'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'MercuryFallbackShareAttachment',propTypes:{attachment:c('MercuryShareAttachmentReactShape'),isSponsored:i.bool,location:i.oneOf(c('MercuryShareAttachmentRenderLocations').getValues()),messageID:i.string,pageID:i.string},renderLink:function(k){if(c('MercuryShareAttachmentRenderLocations').isPreview(this.props.location))return k;return (c('React').createElement(c('Link.react'),{className:"_5rw4",href:this.props.attachment.uri,onClick:this._onClick,target:'_blank'},k));},render:function(){return this.renderLink(c('React').createElement(c('MercuryFallbackShareAttachmentContent.react'),this.props));},_onClick:function(event){if(this.props.isSponsored){var k=this.props.attachment&&this.props.attachment.subattachments;if(!k)return;for(var l=k,m=Array.isArray(l),n=0,l=m?l:l[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var o;if(m){if(n>=l.length)break;o=l[n++];}else{n=l.next();if(n.done)break;o=n.value;}var p=o;new (c('MessengerAdsWebTypedLogger'))().setEvent(c('MNAdsLoggerEventEnum').LINK_CLICK).setIsSponsored(this.props.isSponsored).setItemID(p&&p.id).setMessageID(this.props.messageID).setPageID(this.props.pageID).log();}}}});f.exports=j;},null);
__d('MercuryThirdPartyMediaReactShape',['React'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=h.shape({aspectRatio:h.number,height:h.number.isRequired,lockHeight:h.bool.isRequired,width:h.number.isRequired}),j=h.shape({chatImageDimensions:i.isRequired,chatMediaDimensions:i.isRequired,chatTextClasses:h.string,mediaSrc:h.string.isRequired,messengerImageDimensions:i.isRequired,messengerMediaDimensions:i.isRequired,messengerTextClasses:h.string,showMediaWithText:h.bool.isRequired});f.exports=j;},null);
__d('MercuryThirdPartyMediaAttachmentContent.react',['cx','ix','CenteredContainer.react','ControlledRefererIFrame.react','FBOverlayBase.react','FBOverlayContainer.react','FBOverlayElement.react','Image.react','ImageBlock.react','Link.react','MercuryFallbackShareAttachmentTextBlock.react','MercuryShareAttachmentRenderLocations','MercuryThirdPartyMediaReactShape','React','ReactDOM','ResponsiveBlock.react','URI','joinClasses'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k={IMAGE:'image',MEDIA:'media'},l=c('React').createClass({displayName:'MercuryThirdPartyMediaAttachmentContent',propTypes:{attachment:j.object.isRequired,location:j.oneOf(c('MercuryShareAttachmentRenderLocations').getValues()).isRequired,media:c('MercuryThirdPartyMediaReactShape').isRequired},getInitialState:function(){return {showMedia:false,imageDimensions:this._getDimensions(k.IMAGE),mediaDimensions:this._getDimensions(k.MEDIA)};},render:function(){var n=this.props.attachment,o=this.props.location,p=this.props.media,q=(c('MercuryShareAttachmentRenderLocations').CHAT===o?"_49or":'')+(c('MercuryShareAttachmentRenderLocations').MESSENGER===o?' '+"_tih":'')+(!(n&&n.media.image)?' '+"_49ou":'');if(o===c('MercuryShareAttachmentRenderLocations').CHAT){return (c('React').createElement(c('ResponsiveBlock.react'),{onResize:this._updateMediaSize,ref:'wrapper',className:p.chatTextClasses},this._renderMediaFrame(),c('React').createElement('div',{className:c('joinClasses')(q,this.state.showMedia&&!this.props.media.showMediaWithText?"hidden_elem":''),spacing:'medium'},this._renderImageWithPlayButton(),c('React').createElement('div',{className:"_4cra"},c('React').createElement(c('MercuryFallbackShareAttachmentTextBlock.react'),{attachment:n,location:o})))));}else if(o===c('MercuryShareAttachmentRenderLocations').MESSENGER)return (c('React').createElement(c('ResponsiveBlock.react'),{onResize:this._updateMediaSize,ref:'wrapper'},c('React').createElement('div',{className:c('joinClasses')(this.props.className,this._computeClass())},this._renderMediaFrame(),c('React').createElement('div',{className:this.state.showMedia&&!this.props.media.showMediaWithText?"hidden_elem":''},this._renderImageWithPlayButton(),c('React').createElement(c('Link.react'),{className:c('joinClasses')(p.messengerTextClasses,"_5rw4 _vjv"),href:this.props.media.mediaSrc,target:'_blank'},c('React').createElement(c('MercuryFallbackShareAttachmentTextBlock.react'),{attachment:n,location:o}))))));},_updateMediaSize:function(){this.setState({imageDimensions:this._getDimensions(k.IMAGE),mediaDimensions:this._getDimensions(k.MEDIA)});},_computeClass:function(){if(!this.props.attachment.media||!this.props.attachment.media.image)return "_3xn3 _5swn";var n=this._getDimensions(this.state.showMedia?k.MEDIA:k.IMAGE),o=n.height,p=n.width,q=o>p;return "_3xn3"+(m(o,p)&&!q?' '+"_3xn5":'')+(q?' '+"_3xn6":'')+(p>=o?' '+"_3xn7":'');},_getDefaultDimensions:function(n){var o=this.props.media;if(this._locationIsChat()){return n===k.IMAGE?o.chatImageDimensions:o.chatMediaDimensions;}else return n===k.IMAGE?o.messengerImageDimensions:o.messengerMediaDimensions;},_getDimensions:function(n){var o=this._getDefaultDimensions(n),p=c('ReactDOM').findDOMNode(this.refs.wrapper);if(p){var q=o.aspectRatio,r=p.offsetWidth;if(q!=null){return {aspectRatio:q,height:r*q,lockHeight:false,width:r};}else if(o.lockHeight){return {aspectRatio:null,height:o.height,lockHeight:true,width:r};}else return o;}else return o;},_handleClick:function(n){n.preventDefault();this.setState({showMedia:true,iframeWidth:c('ReactDOM').findDOMNode(this.refs.wrapper).offsetWidth});},_renderImageWithPlayButton:function(){var n=this.state.imageDimensions,o={height:n.height,width:n.width};return (c('React').createElement(c('FBOverlayContainer.react'),{className:(this.state.showMedia?"hidden_elem":'')+(' '+"clearfix"),style:o},c('React').createElement(c('FBOverlayBase.react'),null,c('React').createElement(c('Image.react'),{style:o,src:this.props.attachment.media.image})),c('React').createElement(c('FBOverlayElement.react'),null,c('React').createElement(c('CenteredContainer.react'),{vertical:true},c('React').createElement(c('Image.react'),{className:"_4crc",onClick:this._handleClick,src:i('/images/chat/chat_play_icon.png')})))));},_renderMediaFrame:function(){if(!this.state.showMedia)return c('React').createElement('div',null);var n=this.state.mediaDimensions,o=new (c('URI'))(this.props.media.mediaSrc);o.addQueryData({autoplay:true});return (c('React').createElement(c('ControlledRefererIFrame.react'),{allowTransparency:true,frameBorder:0,height:n.height,src:o.toString(),width:n.width,allowFullScreen:true}));},_locationIsChat:function(){return this.props.location===c('MercuryShareAttachmentRenderLocations').CHAT;}});function m(n,o){return n<=300&&o<=300;}f.exports=l;},null);
__d('MercuryYoutubeLinkParser',['MercuryConfig','MercuryShareAttachmentRenderLocations','URI'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h='www.youtube.com',i='m.youtube.com',j='https://www.youtube.com/',k='/watch',l={_isValidYoutubeLink:function(m,n){var o=this._getYoutubeURI(n),p=o.getDomain(),q=o.getPath(),r=o.getQueryData();if(c('MercuryConfig').WWWMessengerYoutubePreviewGK)return ((p===h||p===i)&&this._isValidYoutubePath(q,r)&&(m===c('MercuryShareAttachmentRenderLocations').MESSENGER||m===c('MercuryShareAttachmentRenderLocations').CHAT));return false;},_getYoutubeURI:function(m){return new (c('URI'))(new (c('URI'))(m).getQueryData().u);},_isValidYoutubePath:function(m,n){return (m===k&&n.v!=null);},_getVideoEmbedURI:function(m,n){if(this._isValidYoutubeLink(m,n)){var o=this._getYoutubeURI(n);return new (c('URI'))(j).setPath('/embed/'+o.getQueryData().v).toString();}else return '';}};f.exports=l;},null);
__d('MercuryVideoShareYoutubeAttachment.react',['cx','MercuryFallbackShareAttachment.react','MercuryShareAttachmentRenderLocations','MercuryThirdPartyMediaAttachmentContent.react','MercuryYoutubeLinkParser','React'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'MercuryVideoShareYoutubeAttachment',propTypes:{attachment:i.object.isRequired,location:i.oneOf(c('MercuryShareAttachmentRenderLocations').getValues()).isRequired,maxWidth:i.number},render:function(){if(c('MercuryYoutubeLinkParser')._isValidYoutubeLink(this.props.location,this.props.attachment.uri))return (c('React').createElement(c('MercuryThirdPartyMediaAttachmentContent.react'),{attachment:this.props.attachment,location:this.props.location,media:this._getYoutubeMediaShape()}));return c('React').createElement(c('MercuryFallbackShareAttachment.react'),this.props);},_getYoutubeMediaShape:function(){var k={aspectRatio:9/16,height:0,lockHeight:false,width:0};return {chatImageDimensions:k,chatMediaDimensions:k,chatTextClasses:"_3rnp",mediaSrc:c('MercuryYoutubeLinkParser')._getVideoEmbedURI(this.props.location,this.props.attachment.uri),messengerImageDimensions:k,messengerMediaDimensions:k,messengerTextClasses:"_3rnq",showMediaWithText:true};}});f.exports=j;},null);