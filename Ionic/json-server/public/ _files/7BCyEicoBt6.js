if (self.CavalryLogger) { CavalryLogger.start_js(["aQQAs"]); }

__d("PokeCSSConfig",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={area:"poke_area",live_new:"poke_live_new",live_empty:"poke_live_empty",live_item:"poke_live_item_",option:"poke_option",option_sigil:"PokeOptionSigil"};},null);
__d("XPokeLiveController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pokes\/live\/",{poke_source:{type:"Int",required:true}});},null);
__d('PokeUtility',['CSS','PokeCSSConfig','XPokeLiveController','ge'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={};f.exports.shouldActOn=function(i,j){if(!i||!j)return false;if(!(i in h)){h[i]={poke_time:true};return true;}if(!(j in h[i])){h[i][j]=true;return true;}return false;};f.exports.getLivePokeURI=function(i){return c('XPokeLiveController').getURIBuilder().setInt('poke_source',i).getURI();};f.exports.hideExistingLivePoke=function(i){var j=c('ge')(c('PokeCSSConfig').live_empty);if(j)c('CSS').hide(j);var k=c('ge')(c('PokeCSSConfig').live_item+i);if(k)c('CSS').hide(k);};},null);
__d('FriendBrowserNameTypeahead',['Arbiter','CSS'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){'use strict';this._typeahead=i;}h.prototype.enable=function(){'use strict';var i=this._typeahead.getCore(),j=i.getValue();this._onResetSubscription=this._typeahead.subscribe('reset',function(){if(j!==i.getValue()){j=i.getValue();c('Arbiter').inform('friend-browser/name-change');}});this._onBlurSubscription=this._typeahead.subscribe('blur',function(){if(!i.selectedText){if(i.getValue()!=='')c('CSS').addClass(this._typeahead.core.inputWrap,'selected');if(j!==i.getValue()){j=i.getValue();c('Arbiter').inform('friend-browser/name-change');}}}.bind(this));};h.prototype.disable=function(){'use strict';this._onBlurSubscription.unsubscribe();this._onResetSubscription.unsubscribe();};f.exports=h;},null);
__d('WebFriendingRequests',['Event','DOM','Vector','MarauderLogger','Arbiter','debounceCore'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={init:function(i,j){this._pymkBox=i;this._lastPymkSeen=-1;this._recordPYMKImpression();c('Event').listen(window,'scroll',c('debounceCore')(this._recordPYMKImpression.bind(this),100));c('Event').listen(window,'resize',c('debounceCore')(this._recordPYMKImpression.bind(this),100));c('Arbiter').subscribe('pymk-x-out',this._handleXout.bind(this));this._requestsBox=j;if(!this._requestsBox)return;this._lastRequestSeen=-1;this._recordFriendRequestImpression();c('Event').listen(window,'scroll',c('debounceCore')(this._recordFriendRequestImpression.bind(this),100));c('Event').listen(window,'resize',c('debounceCore')(this._recordFriendRequestImpression.bind(this),100));},_recordPYMKImpression:function(){var i=c('DOM').scry(this._pymkBox,'li.friendBrowserListUnit'),j=c('Vector').getViewportDimensions().y,k=i.length-1;while(k>this._lastPymkSeen){var l=c('Vector').getElementPosition(i[k],'viewport').y;if(l>0&&l+c('Vector').getElementDimensions(i[k]).y<=j)break;k-=1;}var m=k;while(k>this._lastPymkSeen){var n=c('DOM').find(i[k],'input.friendBrowserID'),o=parseInt(n.value,10),p={pymk_id:o,pymk_location:'friends_center'};c('MarauderLogger').log('regular_pymk_imp',undefined,p);k-=1;}this._lastPymkSeen=Math.max(this._lastPymkSeen,m);},_recordFriendRequestImpression:function(){var i=c('DOM').scry(this._requestsBox,'div.friendRequestItem'),j=c('Vector').getViewportDimensions().y,k=i.length-1;while(k>this._lastRequestSeen){var l=c('Vector').getElementPosition(i[k],'viewport').y;if(l>0&&l+c('Vector').getElementDimensions(i[k]).y<=j)break;k-=1;}var m=k;while(k>this._lastRequestSeen){var n=i[k].getAttribute('data-id'),o={request_id:n,request_location:'friend_center_requests'};c('MarauderLogger').log('request_seen','friend_request_waterfall',o);k-=1;}this._lastRequestSeen=Math.max(this._lastRequestSeen,m);},_handleXout:function(){this._lastPymkSeen-=1;this._recordPYMKImpression();}};f.exports=h;},null);
__d('EchoDataSource',['ArbiterMixin','emptyFunction','SearchableEntry','mixin'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(){'use strict';i.constructor.call(this);}j.prototype.query=function(k,l,m,n){'use strict';var o=k?[{uid:k,text:k}]:[];this.inform('respond',{value:k,results:o,isAsync:false});};j.prototype.search=function(k,l){'use strict';if(!k)return;var m=new (c('SearchableEntry'))({uniqueID:k?k:'null',title:k});l([m],k);};Object.assign(j.prototype,{events:['respond'],bootstrap:c('emptyFunction'),init:c('emptyFunction')});f.exports=j;},null);
__d("XPokeDialogController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pokes\/dialog\/",{do_confirm:{type:"Bool",defaultValue:false},poke_target:{type:"Int"},__asyncDialog:{type:"Int"}});},null);
__d('Poke',['Arbiter','AsyncRequest','ChannelConstants','PokeUtility','XPokeDialogController'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j){var k=j.obj.poke_source,l=j.obj.poke_time;if(!c('PokeUtility').shouldActOn(k,l))return;var m=c('PokeUtility').getLivePokeURI(k);new (c('AsyncRequest'))().setURI(m).send();c('PokeUtility').hideExistingLivePoke(k);}f.exports.init=function(i){c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('live_poke'),h);i.getView().subscribe('afterSelect',function(){var j=i.getCore().getHiddenValue();if(j!==''){var k=c('XPokeDialogController').getURIBuilder().setInt('poke_target',j).getURI();new (c('AsyncRequest'))().setURI(k).setNectarModuleDataSafe(i.getView().getElement()).send();i.getCore().reset();}return true;});};},null);
__d('HubsTypeaheadView',['fbt','Arbiter','AsyncRequest','ContextualTypeaheadView','CSS','DOM','Event','$'],function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,c('ContextualTypeaheadView'));j=i&&i.prototype;function k(l,m){'use strict';j.constructor.call(this,l,m);if(m.allowDedupe)this.subscribe('select',this.selectDuplicates.bind(this));}k.prototype.hide=function(){'use strict';return this.canHide?j.hide.call(this):null;};k.prototype.reset=function(){'use strict';return this.canHide?j.reset.call(this):null;};k.prototype._createFreeFormNode=function(l){'use strict';var m=l;if(this.showCreatePrompt){m=h._("Agregar \"{partial_name}\"",[h.param('partial_name',l)]);}else if(this.showAltCreatePrompt)m=h._("Crear \"{partial_name}\"",[h.param('partial_name',l)]);return {text:m,orig_text:l,type:'addnew calltoaction',uid:'0'};};k.prototype.validateQuery=function(l){'use strict';return this.minQueryLength?l.length>=this.minQueryLength:true;};k.prototype.render=function(l,m,n){'use strict';var o=[],p=Math.max(1,Math.floor(m.length/10));for(var q=p;q<m.length;q++)if(!!m[q].already_added){o.push(m[q]);m.splice(q,1);q--;}m=m.concat(o);if(this.alwaysRender&&l!=='')if(this.allowFreeformEntry){if(this.validateQuery(l))m.push(this._createFreeFormNode(l));}else{var r=l.toLowerCase().trim(),s=false;for(var t=0;t<m.length;t++)if(r==m[t].text.toLowerCase().trim()){s=true;break;}if(!s&&this.validateQuery(l))m.push(this._createFreeFormNode(l));}var u=m.length;for(var v=0;v<m.length;v++)if(m[v].uid==false)u--;if(this.allowDedupe&&u>1&&l.length>=3)m.push({text:h._("Marcar resultados duplicados"),type:'dupelink calltoaction'});return j.render.call(this,l,m,n);};k.prototype.selectDuplicates=function(l,m){'use strict';if(!m.selected.type.match('dupelink'))return;var n=[];for(var o=0;o<this.results.length;o++){if(this.results[o].uid==false)continue;n.push(this.results[o].uid);}var p=c('Arbiter').subscribe('typeahead/'+this.collectionID+'/confirmDupes',function(q,r){var s=this.results.map(function(v){return v.uid;});for(var t=0;t<r.dupe_ids.length;t++){var u=s.indexOf(r.dupe_ids[t]);c('CSS').hide(this.items[u]);}this.hasHiddenDupes=r.dupe_ids.length>0;}.bind(this));c('Arbiter').subscribe('typeahead/'+this.collectionID+'/finishDupes',function(q,r){c('Arbiter').unsubscribe(p);this.canHide=true;this.hasHiddenDupes&&c('CSS').hide(c('DOM').find(this.content,'.dupelink'));this.hasHiddenDupes=false;}.bind(this));this.canHide=false;new (c('AsyncRequest'))('/ajax/typeahead/quality/duplicates').setData({ids:n,surface:c('$')('collections_surface').value,collection_id:this.collectionID}).send();};k.initFreeformBoxes=function(){'use strict';var l=c('DOM').scry(document,'div.fbAddFormDialog')[0];if(!l)return;var m=c('DOM').find(l,'form');c('Event').listen(m,'submit',function(){c('DOM').scry(m,'div.fbFreeformInput').forEach(function(n){if(c('DOM').find(n,'input.inputtext').value)c('CSS').addClass(n.firstChild,'selected');});});};Object.assign(k.prototype,{canHide:true,hasHiddenDupes:false});f.exports=k;},null);
__d('RampUpPendingRequests',['AsyncRequest','CSS','DOM'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j,k,l,m,n,o){this._id=k;this._ref=l;this._friendingLocation=m;this._friendingLocationRefs=n;this._confirmButton=i;this._deleteButton=j;this._responseSection=c('DOM').find(this._confirmButton,'^.ruResponse');this._userBox=c('DOM').find(this._responseSection,'^.ruUserBox');this._deleteButton.onclick=this._delete.bind(this);this._confirmButton.onclick=this._confirm.bind(this);this._loadingIndicator=c('DOM').find(this._responseSection,'.ruResponseLoading');this._viewer_id=o;}Object.assign(h.prototype,{_send:function(i,j){c('DOM').remove(c('DOM').find(this._responseSection,'.ruResponseButtons'));var k=c('DOM').find(this._userBox,'.followUpQuestion'),l=c('DOM').find(this._userBox,'.requestInfoContainer');if(i==='reject'){c('CSS').hide(l);c('DOM').remove(c('DOM').find(this._userBox,'.ruResponseSectionContainer'));c('CSS').show(k);}else c('CSS').show(this._loadingIndicator);var m=new (c('AsyncRequest'))().setURI('/requests/friends/ajax/').setData({action:i,id:this._id,ref:this._ref,floc:this._friendingLocation,frefs:this._friendingLocationRefs,viewer_id:this._viewer_id}).setTransportErrorHandler(function(){c('DOM').remove(this._loadingIndicator);c('DOM').remove(k);c('CSS').show(c('DOM').find(this._responseSection,'.ruTransportErrorMsg'));}.bind(this));if(j)m.setHandler(j);m.send();},_delete:function(){var i='reject';this._send(i);},_confirm:function(){this._send('confirm',function(i){c('CSS').hide(this._loadingIndicator);var j=i.payload;c('DOM').setContent(this._responseSection,j.success?j.button.markup:j.err);}.bind(this));}});Object.assign(h,{hookUp:function(i,j,k,l,m,n,o){new h(i,j,k,l,m,n,o);}});f.exports=h;},null);
__d('ClearableTypeahead',['Event'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={resetOnCloseButtonClick:function(i,j){c('Event').listen(j,'click',function(){var k=i.getCore();k.getElement().focus();k.reset();});}};f.exports=h;},null);
__d('TypeaheadSetPhotoOnSelect',['CSS','DOM','Event'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){'use strict';this._typeahead=i;}h.prototype.enable=function(){'use strict';var i=c('DOM').scry(this._typeahead.getElement(),'.photo')[0];if(i){if(!c('DOM').isNodeOfType(i,'img')){var j=c('DOM').create('img',{className:i.className});c('DOM').replace(i,j);i=j;}var k=c('CSS').hide.bind(null,i),l=c('CSS').show.bind(null,i);this._eventListener=c('Event').listen(i,{load:l,error:k,abort:k});this._subscription=this._typeahead.subscribe('select',function(m,n){var o=n.selected.photo||this._typeahead.view.fallbackPhoto;o?i.setAttribute('src',o):k();}.bind(this));}};h.prototype.disable=function(){'use strict';this._eventListener.remove();this._eventListener=null;this._typeahead.unsubscribe(this._subscription);this._subscription=null;};Object.assign(h.prototype,{_eventListener:null,_subscription:null});f.exports=h;},null);
__d('legacy:SetPhotoOnSelectTypeaheadBehavior',['TypeaheadSetPhotoOnSelect'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();if(!b.TypeaheadBehaviors)b.TypeaheadBehaviors={};b.TypeaheadBehaviors.setPhotoOnSelect=function(h){h.enableBehavior(c('TypeaheadSetPhotoOnSelect'));};},3);