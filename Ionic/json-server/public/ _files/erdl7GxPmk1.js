if (self.CavalryLogger) { CavalryLogger.start_js(["FCDEV"]); }

__d('createContentStateForTextWithMessengerEmoji',['ContentState','DraftModifier','MessengerSupportedEmoji','insertMessengerEmojiIntoContentState'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){var j=c('ContentState').createFromText('');while(i){var k=c('MessengerSupportedEmoji').findEmoji(i);if(k){var l=i.substr(0,k.index),m=k[0],n=i.substr(k.index+m.length);j=c('DraftModifier').insertText(j,j.getSelectionAfter(),l);j=c('insertMessengerEmojiIntoContentState')(k.emoji,j,j.getSelectionAfter(),j.getFirstBlock().getInlineStyleAt(0));i=n;}else break;}if(i)j=c('DraftModifier').insertText(j,j.getSelectionAfter(),i);return j;}f.exports=h;},null);
__d('MessengerTextWithEmojiInput.react',['cx','CompositeDraftDecorator','ContentState','DraftEditor.react','EditorState','MercuryConfig','MessengerEmojiSpan.react','ReactComponentWithPureRenderMixin','React','XUICloseButton.react','createContentStateForTextWithMessengerEmoji','getEntityMatcher','getVisibleValueForContentState','getVisibleValueForContentStateWithMessengerEmoji','handleBeforeInputForMessengerEmoji','joinClasses'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'MessengerTextWithEmojiInput',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{onReturn:i.func,maxLength:i.number,onChange:i.func,placeholder:i.string,initialValue:i.string},getInitialState:function(){return {editorState:this._createEditorState(this.props.initialValue),isEmpty:!this.props.initialValue||this.props.initialValue.length===0};},_createEditorState:function(k){return c('MercuryConfig').MessengerNewEmojiGK?c('EditorState').createWithContent(c('createContentStateForTextWithMessengerEmoji')(k||''),this._getDecorator()):c('EditorState').createWithContent(c('ContentState').createFromText(k?k:''));},componentDidMount:function(){this.focusInput();},render:function(){return (c('React').createElement('div',{className:c('joinClasses')(this.props.className,"_30e7")},c('React').createElement('div',{className:"_5j5f"},c('React').createElement(c('DraftEditor.react'),{editorState:this.state.editorState,handleBeforeInput:this._handleBeforeInput,handleReturn:this._handleReturn,onChange:this._onChange,placeholder:this.props.placeholder,ref:'input',spellCheck:false,stripPastedStyles:true,textAlignment:'left'})),c('React').createElement(c('XUICloseButton.react'),{size:'small',onMouseDown:this._handleClear,className:(this.state.isEmpty?"hidden_elem":'')+(' '+"_5j5l")})));},_onChange:function(k){if(k!==this.state.editorState){var l=!k.getCurrentContent().hasText();this.setState({editorState:k,isEmpty:l});this.props.onChange&&this.props.onChange(l);}},_getDecorator:function(){return new (c('CompositeDraftDecorator'))([{strategy:c('getEntityMatcher')(function(k){return k.getType()==='EMOJI';}),component:c('MessengerEmojiSpan.react')}]);},getValue:function(){var k=this.state.editorState.getCurrentContent();return c('MercuryConfig').MessengerNewEmojiGK?c('getVisibleValueForContentStateWithMessengerEmoji')(k):c('getVisibleValueForContentState')(k);},focusInput:function(){this.refs.input.focus();this._onChange(c('EditorState').moveFocusToEnd(this.state.editorState));},_handleBeforeInput:function(k){if(this.props.maxLength&&this.props.maxLength<=this.getValue().length)return true;if(!c('MercuryConfig').MessengerNewEmojiGK)return false;var l=c('handleBeforeInputForMessengerEmoji')(this.state.editorState,k);if(l===this.state.editorState)return false;this.setState({editorState:l});return true;},_handleReturn:function(k){this.props.onReturn&&this.props.onReturn(k);return true;},_handleClear:function(){this.setState({editorState:this._createEditorState('')});}});f.exports=j;},null);
__d("XGroupSideConversationCreateController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/groups\/side_conversation\/",{post_id:{type:"Int"}});},null);