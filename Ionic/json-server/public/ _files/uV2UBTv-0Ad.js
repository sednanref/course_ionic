if (self.CavalryLogger) { CavalryLogger.start_js(["Yk\/ej"]); }

__d('BasePrivacyWidget',['Arbiter','ArbiterMixin','DOM','Form','PrivacyConst'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('PrivacyConst').BaseValue;function i(){}Object.assign(i.prototype,c('ArbiterMixin'),{init:function(j,k,l,m){this._controllerId=k;this._root=j;this._options=Object.assign(m||{},l);this._formDataKey='privacy_data';},getData:function(){return this._model.getData();},_getPrivacyData:function(j){j=j||this._fbid;var k={};k[j]=this.getData();return k;},getRoot:function(){return this._root;},_initMenu:function(j){this._menu=j;this._menu.subscribe('itemclick',this._onMenuSelect.bind(this));},_isCustomSetting:function(j){return j==h.CUSTOM;},_isEveryoneSetting:function(j){return j==h.EVERYONE;},_updateSelector:function(j){var k=this._model.value;if(!this._isCustomSetting(k)){this._onPrivacyChanged();return;}},_onPrivacyChanged:function(){this._saveFormData();c('Arbiter').inform('Form/change',{node:this.getRoot()});this.inform('privacyChanged',this.getData());c('Arbiter').inform('UIPrivacyWidget/globalPrivacyChanged',{fbid:this._fbid,data:this.getData()});},_saveFormData:function(){var j=c('DOM').find(this.getRoot(),'div.UIPrivacyWidget_Form');c('DOM').empty(j);var k={};if(this._options.useLegacyFormData){k[this._formDataKey]=this.getData();}else k[this._formDataKey]=this._getPrivacyData();c('Form').createHiddenInputs(k,j);}});f.exports=i;},null);
__d('TargetedPrivacyModel',['PrivacyConst','TargetedPrivacyConsts'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('PrivacyConst').BaseValue;function i(){this.value=h.EVERYONE;this.countries=[];this.countries_names=[];this.location_type=c('TargetedPrivacyConsts').LOC_ALL;this.location_ids=[];this.location_ids_names=[];this.locales=[];this.locales_names=[];this.gender=c('TargetedPrivacyConsts').GENDER_BOTH;this.age_min=0;this.age_max=0;return this;}Object.assign(i.prototype,{init:function(j,k,l,m,n,o,p,q,r,s,t,u,v){this.value=j;this.countries=k.slice();this.countries_names=l.slice();this.location_type=m;this.location_ids=n.slice();this.location_ids_names=o.slice();this.age_min=p;this.age_max=q;this.gender=r;this.locales=s.slice();this.locales_names=t.slice();this.see_regions=v;this.see_cities=u;},getData:function(){var j={};if(this.value==h.EVERYONE)return j;var k=['countries','location_type','location_ids','age_min','age_max','gender','locales'];for(var l=0;l<k.length;++l){var m=k[l];j[m]=this[m];}j.genders=j.gender;return j;}});f.exports=i;},null);
__d('UITargetedPrivacyWidget',['fbt','ArbiterMixin','AsyncRequest','BasePrivacyWidget','Dialog','MenuSelectableItem','PrivacyConst','React','TargetedPrivacyModel','Tooltip','$','classWithMixins','mixin'],function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,c('classWithMixins')(c('BasePrivacyWidget'),c('mixin')(c('ArbiterMixin'))));j=i&&i.prototype;function k(l,m,n,o,p,q,r,s){'use strict';j.constructor.call(this);var t={useLegacyFormData:true};this.init(m,n,t,s);this._profileId=o;this._model=new (c('TargetedPrivacyModel'))();this._formDataKey='targeted_privacy_data';this._button=p;this._everyoneItem=this._retrieveEveryoneItem(l);this._customItem=this._retrieveCustomItem(l);this._defaultTooltip=q;this._shouldDisplayTooltip=r;k.instances[this._controllerId]=this;this._initMenu(l);this._saveFormData();}k.prototype._onMenuSelect=function(l,m){'use strict';var n=m.item;if(!n instanceof c('MenuSelectableItem'))return;var o=n.getValue();if(o==c('PrivacyConst').BaseValue.EVERYONE)this._model=new (c('TargetedPrivacyModel'))();this._saveFormData();this._updateSelector();this._updateTooltipForButtonFromItem(n);if(this._isCustomSetting(o))this._showDialog();};k.prototype._updateTooltipForButtonFromItem=function(l){'use strict';if(!this._shouldDisplayTooltip)return;var m=l.getValue();if(this._isCustomSetting(m)){c('Tooltip').set(this._button,h._("Personalizado"));}else c('Tooltip').set(this._button,this._defaultTooltip);};k.prototype.reset=function(){'use strict';this._model=new (c('TargetedPrivacyModel'))();this._updateSelector();this._saveFormData();return this;};k.prototype.setProfileID=function(l){'use strict';this._profileId=l;};k.prototype._showDialog=function(){'use strict';var l={controller_id:this._controllerId,profile_id:this._profileId};this._dialog=new (c('Dialog'))().setAsync(new (c('AsyncRequest'))().setURI(k.DIALOG_URI).setData(l)).setModal(true).show();};k.prototype._updateSelector=function(){var l=arguments.length<=0||arguments[0]===undefined?false:arguments[0];'use strict';j._updateSelector.call(this);if(l&&!this._isCustomSetting(this._model.value)){this._everyoneItem.select();this._customItem.deselect();this._updateTooltipForButtonFromItem(this._everyoneItem);this._menu.inform('change',this._menu.getSelection());}};k.prototype._retrieveEveryoneItem=function(l){'use strict';return this._retrieveTargetItem(l,this._isEveryoneSetting);};k.prototype._retrieveCustomItem=function(l){'use strict';return this._retrieveTargetItem(l,this._isCustomSetting);};k.prototype._retrieveTargetItem=function(l,m){'use strict';return l._items.find(function(n){return n instanceof c('MenuSelectableItem')&&m(n.getValue());});};k.getInstance=function(l){'use strict';return this.instances[l];};Object.assign(k,{DIALOG_URI:'/ajax/privacy/targeted_privacy_widget_dialog.php',instances:{}});f.exports=k;},null);
__d('ShareActorSelector.react',['ActorSelector.react','AsyncRequest','React','XPagesShareActorListController'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=110,j=c('React').createClass({displayName:'ShareActorSelector',propTypes:{onChange:h.func.isRequired,targetID:h.string.isRequired},getInitialState:function(){return {actorIDs:[],loading:true,selectedActorID:null};},componentWillMount:function(){this._fetchActorIDs();},render:function(){if(!this.state.actorIDs||!this.state.selectedActorID)return c('React').createElement('div',null);return (c('React').createElement(c('ActorSelector.react'),{actorIDs:this.state.actorIDs,coverEnabled:false,loading:this.state.loading,onChange:this._onChange,ref:'selector',selectedActorID:this.state.selectedActorID,showName:true,showNameMaxWidth:i,suppressed:this.state.actorIDs.length===1}));},componentDidUpdate:function(k){if(this.props.targetID!==k.targetID)this._fetchActorIDs();},_fetchActorIDs:function(){this.setState({loading:true});var k=c('XPagesShareActorListController').getURIBuilder().setInt('target_id',this.props.targetID).getURI();new (c('AsyncRequest'))().setURI(k).setHandler(function(l){var m=l.getPayload().actorIDs,n=this.props.targetID;this.setState({actorIDs:m,loading:false,selectedActorID:n});this.props.onChange({value:n});}.bind(this)).send();},_onChange:function(k){this.setState({selectedActorID:k.value});this.props.onChange(k);}});f.exports=j;},null);
__d('ShareModePage',['CSS','Input','React','ReactDOM','ShareActorSelector.react','ShareMode','UITargetedPrivacyWidget'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('ShareMode'));i=h&&h.prototype;function j(k,l,m,n,o,p){'use strict';i.constructor.call(this,k);this._pageID=p;this._pageSelector=l;this._actorSelectorContainer=m;this._actorIDInput=n;this._defaultActorID=this._actorIDInput.value;this._targetingWidget=o;this._targetingWidgetInstance=null;if(this._pageSelector)this._pageSelector.subscribe('change',function(q,r){this._pageID=this._pageSelector.getValue();this.show();}.bind(this));}j.prototype._updateActorIDInput=function(){'use strict';c('Input').setValue(this._actorIDInput,this._selectedActorID);};j.prototype._updateActorSelector=function(){'use strict';c('ReactDOM').render(c('React').createElement(c('ShareActorSelector.react'),{onChange:function(k){this._selectedActorID=k.value;this.show();}.bind(this),targetID:this._pageID}),this._actorSelectorContainer);};j.prototype._updateTargetingWidget=function(){'use strict';if(!this._targetingWidgetInstance)this._targetingWidgetInstance=c('UITargetedPrivacyWidget').getInstance(this._targetingWidget.id);if(this._targetingWidgetInstance)this._targetingWidgetInstance.setProfileID(this._selectedActorID);c('CSS').conditionShow(this._targetingWidget,this._pageID===c('Input').getValue(this._actorIDInput,this._selectedActorID));};j.prototype.show=function(){'use strict';this._updateActorSelector();this._updateActorIDInput();this._updateTargetingWidget();};j.prototype.hide=function(){'use strict';c('Input').setValue(this._actorIDInput,this._defaultActorID);c('CSS').hide(this._targetingWidget);};f.exports=j;},null);